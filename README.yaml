name: "aws-datadog-private-location-ecs"
# Canonical GitHub repo
github_repo: "cloudposse-terraform-components/aws-datadog-private-location-ecs"
# Short description of this project
description: |-
  This component creates a Datadog Private Location and deploys it to ECS (EC2 or Fargate).

  ## Sponsorship

  <picture>
    <source media="(prefers-color-scheme: dark)" srcset="https://cloudposse.com/images/partners/datadog-white.svg"/>
    <source media="(prefers-color-scheme: light)" srcset="https://cloudposse.com/images/partners/datadog-purple.svg"/>
    <img class="datadog-logo" alt="Datadog" src="https://cloudposse.com/images/partners/datadog-purple.svg" align="right" width="40%"/>
  </picture>


  This project is supported by the [Datadog Open Source Program](https://www.datadoghq.com/partner/open-source/).

  As part of this collaboration, Datadog provides a dedicated sandbox account that we use for automated integration and acceptance testing. This contribution allows us to continuously validate changes against a real Datadog environment, improving reliability and reducing the risk of regressions.

  We are grateful to Datadog for supporting our open source ecosystem and helping ensure that infrastructure code for Terraform remains stable and well-tested
  ___

usage: |-
  **Note** The app key required for this component requires admin level permissions if you are using the default roles.
  Admin's have permissions to Write to private locations, which is needed for this component.

  **Stack Level**: Regional

  Here's an example snippet for how to use this component.

  ```yaml
  # stacks/catalog/datadog/private-location.yaml
  components:
    terraform:
      datadog-private-location:
        metadata:
          component: datadog-private-location-ecs
        settings:
          spacelift:
            workspace_enabled: true
        vars:
          enabled: true
          name: datadog-private-location
          task:
            task_memory: 512
            task_cpu: 256
            launch_type: FARGATE
            # capacity_provider_strategies takes precedence over launch_type
            capacity_provider_strategies:
              - capacity_provider: FARGATE_SPOT
                weight: 100
                base: null
            network_mode: awsvpc
            desired_count: 1
            ignore_changes_desired_count: true
            ignore_changes_task_definition: false
            use_alb_security_group: false
            assign_public_ip: false
            propagate_tags: SERVICE
            wait_for_steady_state: true
            circuit_breaker_deployment_enabled: true
            circuit_breaker_rollback_enabled: true
          containers:
            datadog:
              name: datadog-private-location
              image: public.ecr.aws/datadog/synthetics-private-location-worker:latest
              compatibilities:
                - EC2
                - FARGATE
                - FARGATE_SPOT
              log_configuration:
                logDriver: awslogs
                options: {}
              port_mappings: []
  ```

  <!-- prettier-ignore-start -->
  <!-- prettier-ignore-end -->
references:
  - name: cloudposse-terraform-components
    description: Cloud Posse's upstream component
    url: https://github.com/orgs/cloudposse-terraform-components/repositories
tags:
  - component/datadog-private-location-ecs
  - layer/datadog
  - provider/aws
  - provider/datadog
# Categories of this project
categories:
  - component/datadog-private-location-ecs
  - layer/datadog
  - provider/aws
  - provider/datadog
# License of this project
license: "APACHE2"
# Badges to display
badges:
  - name: Latest Release
    image: https://img.shields.io/github/release/cloudposse-terraform-components/aws-datadog-private-location-ecs.svg?style=for-the-badge
    url: https://github.com/cloudposse-terraform-components/aws-datadog-private-location-ecs/releases/latest
  - name: Slack Community
    image: https://slack.cloudposse.com/for-the-badge.svg
    url: https://slack.cloudposse.com
related:
  - name: "Cloud Posse Terraform Modules"
    description: Our collection of reusable Terraform modules used by our reference architectures.
    url: "https://docs.cloudposse.com/modules/"
  - name: "Atmos"
    description: "Atmos is like docker-compose but for your infrastructure"
    url: "https://atmos.tools"
contributors: [] # If included generates contribs
